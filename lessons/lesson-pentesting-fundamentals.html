<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 13: Анализ защищенности (Пентест) - Cortex Academy</title>
    <link rel="stylesheet" href="/hack.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Roboto+Mono&display=swap" rel="stylesheet">
</head>
<body class="lesson-page">

    <header>
        <div class="logo">Cortex X</div>
        <nav>
            <a href="index.html">Главная</a>
            <a href="courses.html">Программа</a>
            <a href="#">Войти</a>
        </nav>
    </header>

    <div class="lesson-hero">
        <div class="lesson-hero-content">
            <span class="lesson-meta">Модуль 5 • Урок 13</span>
            <h1>Анализ защищенности: Путь пентестера</h1>
            <p>Наденьте "черную шляпу" во благо. Научитесь думать и действовать как атакующий, чтобы находить уязвимости раньше, чем это сделают злоумышленники.</p>
        </div>
    </div>

    <main class="lesson-container">
        <!-- Боковая навигация по уроку -->
        <aside class="lesson-nav">
            <h3>Этапы пентеста</h3>
            <ul>
                <li><a href="#intro" class="nav-link active">1. Введение в этичный хакинг</a></li>
                <li><a href="#osint-1" class="nav-link">2. OSINT (Часть 1): Техническая разведка</a></li>
                <li><a href="#osint-2" class="nav-link">3. OSINT (Часть 2): Человеческий фактор</a></li>
                <li><a href="#social-engineering" class="nav-link">4. Социальная инженерия</a></li>
                <li><a href="#scanning" class="nav-link">5. Сетевое сканирование (Nmap)</a></li>
                <li><a href="#vuln-mgmt-1" class="nav-link">6. Управление уязвимостями (Часть 1)</a></li>
                <li><a href="#vuln-mgmt-2" class="nav-link">7. Управление уязвимостями (Часть 2)</a></li>
                <li><a href="#network-attacks" class="nav-link">8. Атаки на сети</a></li>
                <li><a href="#app-attacks" class="nav-link">9. Атаки на приложения</a></li>
                <li><a href="#credentials" class="nav-link">10. Сбор и взлом учётных данных</a></li>
                <li><a href="#ad-intro" class="nav-link">11. Устройство Active Directory</a></li>
                <li><a href="#ad-attacks" class="nav-link">12. Атаки на Active Directory</a></li>
            </ul>
        </aside>

        <!-- Основной контент урока -->
        <article class="lesson-content">
            <section id="intro">
                <h2>1. Введение в этичный хакинг: Методология и закон</h2>
                <p><strong>Этичный хакинг (или пентест)</strong> — это санкционированная, легальная попытка обойти систему безопасности компании для выявления уязвимостей. Главное отличие от преступной деятельности — наличие <strong>договора и четко определенной области (Scope)</strong>. Вы действуете с разрешения и в интересах заказчика.</p>
                <h3>Этапы классического пентеста (PTES):</h3>
                <pre class="ascii-diagram">
+------------------------+
| 1. Сбор информации     | -> Пассивный этап, OSINT
| (Intelligence Gathering) |
+------------------------+
            |
            v
+------------------------+
| 2. Сканирование        | -> Активный этап, Nmap
| (Scanning & Enum)      |
+------------------------+
            |
            v
+------------------------+
| 3. Эксплуатация        | -> Получение первоначального доступа
| (Exploitation)         |
+------------------------+
            |
            v
+------------------------+
| 4. Пост-эксплуатация   | -> Повышение привилегий, продвижение
| (Post-Exploitation)    |
+------------------------+
            |
            v
+------------------------+
| 5. Отчетность          | -> Самый важный этап!
| (Reporting)            |
+------------------------+
                </pre>
                <div class="warning-box">
                    <p><strong>Законность — превыше всего!</strong> Никогда не пытайтесь сканировать или атаковать системы без явного письменного разрешения их владельца. Это уголовно наказуемое преступление.</p>
                </div>
            </section>

            <section id="osint-1">
                <h2>2. Введение в OSINT (Часть 1): Техническая разведка</h2>
                <p><strong>Open Source Intelligence (OSINT)</strong> — это сбор информации о цели из общедоступных источников. Наша задача — составить цифровой "чертеж" компании, не отправив ни одного пакета на ее серверы.</p>
                <h3>Поиск поддоменов</h3>
                <p>Поддомены (`dev.`, `test.`, `vpn.`) часто бывают хуже защищены. Инструменты: <strong>Sublist3r, Amass, Findomain</strong>.</p>
                <h3>Анализ DNS и IP-инфраструктуры</h3>
                <p><code>whois</code>, <code>dig</code>, <code>nslookup</code> — наши базовые инструменты. Сервисы вроде <strong>Censys</strong> и <strong>Shodan</strong> позволяют искать хосты с определенными баннерами, портами и уязвимостями по всему интернету.</p>
                 <div class="code-block">
                    <code># Найти все хосты в сети AS12345, у которых открыт 3389 порт (RDP)
# Запрос для Shodan.io:
org:"Target Company" port:"3389"</code>
                    <button class="copy-btn">Копировать</button>
                </div>
                <h3>Google Dorking</h3>
                <p>Использование операторов поиска Google для нахождения конфиденциальной информации.</p>
                <ul>
                    <li><code>site:target.com filetype:xls intext:password</code> — поиск Excel-файлов с паролями.</li>
                    <li><code>inurl:admin.php intitle:"Login" site:target.com</code> — поиск страниц входа в админ-панели.</li>
                </ul>
            </section>
            
            <section id="osint-2">
                <h2>3. Введение в OSINT (Часть 2): Человеческий фактор и утечки кода</h2>
                <h3>Сбор информации о сотрудниках</h3>
                <p><strong>LinkedIn</strong> — основной источник. Мы ищем ФИО, должности (особенно системных администраторов, разработчиков), используемые технологии. Эта информация бесценна для целевого фишинга. Инструмент <strong>theHarvester</strong> автоматизирует сбор email-адресов.</p>
                <h3>Поиск утечек в коде</h3>
                <p><strong>GitHub, GitLab</strong> — разработчики часто по ошибке "заливают" в публичные репозитории исходный код с паролями, ключами API, токенами доступа. Используйте поиск по GitHub с ключевыми словами вроде `target.com password` или `api_key`.</p>
                <h3>Технологический стек</h3>
                <p>Расширения для браузера <strong>Wappalyzer</strong> и <strong>BuiltWith</strong> показывают, на каких технологиях работает сайт (CMS, веб-сервер, фреймворки, аналитические системы). Зная версию, мы можем искать для нее уязвимости.</p>
            </section>
            
            <section id="social-engineering">
                <h2>4. Социальная инженерия: Взлом человека</h2>
                <p>Это искусство манипулирования людьми. Даже самая защищенная система бесполезна, если администратор сам отдаст вам пароль.</p>
                <h3>Фишинг и его виды</h3>
                <p><strong>Phishing</strong> — массовая рассылка поддельных писем. <strong>Spear Phishing</strong> — целевая атака на конкретного человека, с использованием информации из OSINT (имя, должность, проекты). <strong>Whaling</strong> — Spear Phishing, нацеленный на топ-менеджмент.</p>
                <h3>Автоматизация и защита (Stopphish)</h3>
                <p><strong>Для атаки:</strong> фреймворк <strong>Gophish</strong> позволяет создавать фишинговые шаблоны, рассылать их и отслеживать, кто "клюнул".</p>
                <p><strong>Для защиты:</strong></p>
                <ul>
                    <li><strong>Технически:</strong> SPF, DKIM, DMARC для защиты от подделки домена; спам-фильтры.</li>
                    <li><strong>Организационно:</strong> Обучение сотрудников, регулярные симуляции фишинговых атак.</li>
                    <li><strong>Ключевая мера:</strong> <strong>Многофакторная аутентификация (MFA)</strong>.</li>
                </ul>
            </section>

            <section id="scanning">
                <h2>5. Сетевое сканирование: Составление карты сети</h2>
                <p>Переходим к активным действиям. Наша задача — определить "живые" хосты, открытые порты и работающие сервисы. Главный инструмент — <strong>Nmap</strong>.</p>
                 <div class="code-block">
                    <code># Комплексное сканирование с определением версий, ОС и запуском скриптов
sudo nmap -sS -sV -sC -O -T4 -p- scanme.nmap.org

# Расшифровка флагов:
# -sS : SYN-сканирование (быстрое и незаметное)
# -sV : Определить версии сервисов
# -sC : Запустить стандартные скрипты NSE
# -O  : Попытаться определить операционную систему
# -T4 : Агрессивный тайминг (быстрее)
# -p- : Сканировать все 65535 TCP-портов</code>
                    <button class="copy-btn">Копировать</button>
                </div>
                <p>Другие важные сканеры: <strong>masscan</strong> (для очень быстрого сканирования огромных диапазонов IP), сканеры веб-контента <strong>dirb, gobuster, feroxbuster</strong> (ищут скрытые файлы и директории на веб-серверах).</p>
            </section>

            <section id="vuln-mgmt-1">
                <h2>6. Управление уязвимостями (Часть 1): Автоматизированный анализ</h2>
                <p>На этом этапе мы систематически ищем известные слабые места. Основа — <strong>база данных CVE (Common Vulnerabilities and Exposures)</strong>. Каждая известная уязвимость имеет свой уникальный номер, например, CVE-2021-44228 (Log4Shell).</p>
                <p><strong>Сканеры уязвимостей (Nessus, OpenVAS, Qualys):</strong></p>
                <p>Эти инструменты автоматизируют процесс. Они берут результаты сканирования Nmap, определяют версии сервисов и сверяют их с базой CVE. Затем они проводят безопасные проверки, чтобы подтвердить наличие уязвимости. Результат — детальный отчет с оценкой критичности каждой уязвимости по шкале <strong>CVSS (Common Vulnerability Scoring System)</strong> от 0 до 10.</p>
            </section>

             <section id="vuln-mgmt-2">
                <h2>7. Управление уязвимостями (Часть 2): Ручной анализ и верификация</h2>
                <p>Автоматика — это хорошо, но она не всесильна. Задача пентестера — проанализировать отчет сканера и:</p>
                <ul>
                    <li><strong>Отсеять ложные срабатывания (False Positives):</strong> Сканер мог ошибиться. Нужно вручную проверить, действительно ли уязвимость существует и применима.</li>
                    <li><strong>Найти то, что пропустил сканер:</strong> Сканеры плохо находят логические уязвимости, проблемы с контролем доступа (IDOR), уязвимости "нулевого дня".</li>
                    <li><strong>Найти эксплойты:</strong> Используя <strong>Exploit-DB</strong>, <strong>SearchSploit</strong> и GitHub, найти готовый код для эксплуатации подтвержденных уязвимостей.</li>
                    <li><strong>Оценить бизнес-риск:</strong> Уязвимость с CVSS 9.8 на тестовом сервере без данных может быть менее рискованной, чем уязвимость с CVSS 6.0 на сервере с базой данных клиентов.</li>
                </ul>
            </section>
            
            <section id="network-attacks">
                <h2>8. Атаки на сетевом уровне</h2>
                <p>Здесь мы эксплуатируем уязвимости в сетевых протоколах.</p>
                <ul>
                    <li><strong>ARP Spoofing (MITM):</strong> Отравление ARP-кэша в локальной сети. Инструменты: <strong>arpspoof, ettercap</strong>. Позволяет перехватывать трафик между жертвой и шлюзом.</li>
                    <li><strong>LLMNR/NBT-NS Poisoning:</strong> Перехват запросов на разрешение имен в Windows-сетях. Инструмент: <strong>Responder</strong>. Позволяет получить NTLMv2-хэши паролей пользователей.</li>
                    <li><strong>VLAN Hopping:</strong> Атака в сетях с VLAN, позволяющая перепрыгнуть из одного VLAN в другой, к которому у атакующего не должно быть доступа.</li>
                </ul>
            </section>
            
            <section id="app-attacks">
                <h2>9. Атаки на приложения</h2>
                <p>Это огромная область, основанная на <strong>OWASP Top 10</strong>. Мы уже рассматривали ее, но в контексте пентеста акцент делается на эксплуатации.</p>
                <p><strong>Инструментарий:</strong></p>
                <ul>
                    <li><strong>Burp Suite:</strong> Главный инструмент. Его модуль <strong>Repeater</strong> позволяет вручную изменять и пересылать запросы, <strong>Intruder</strong> — автоматизировать перебор (например, для поиска IDOR), <strong>Scanner</strong> — автоматически искать уязвимости.</li>
                    <li><strong>sqlmap:</strong> Лучший инструмент для автоматической эксплуатации SQL-инъекций.</li>
                    <li><strong>Commix / Gason:</strong> Инструменты для эксплуатации Command Injection уязвимостей.</li>
                </ul>
            </section>

            <section id="credentials">
                <h2>10. Сбор и взлом учётных данных</h2>
                <p>Получение валидных учетных данных часто является целью №1. Как мы их получаем и используем?</p>
                <ol>
                    <li><strong>Пассивный сбор:</strong> Поиск утечек в базах данных (Have I Been Pwned), поиск паролей по умолчанию для устройств.</li>
                    <li><strong>Активный онлайн-перебор:</strong>
                        <ul>
                            <li><strong>Password Spraying:</strong> Пробуем 1-2 популярных пароля (`Winter2024!`) против большого списка пользователей. Менее "шумный" метод.</li>
                            <li><strong>Brute Force:</strong> Перебираем тысячи паролей для одной учетной записи. Очень "шумно", скорее всего, приведет к блокировке.</li>
                            <li><strong>Инструменты:</strong> Hydra, Medusa, Metasploit.</li>
                        </ul>
                    </li>
                    <li><strong>Оффлайн-взлом хэшей:</strong>
                        <ul>
                            <li><strong>Получение хэшей:</strong> С помощью Responder, из SAM/NTDS.dit файлов, из баз данных.</li>
                            <li><strong>Взлом:</strong> Используем <strong>John the Ripper</strong> (простой, со словарями) или <strong>Hashcat</strong> (очень быстрый, использует GPU) для подбора пароля по хэшу.</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <section id="ad-intro">
                <h2>11. Устройство Active Directory: Цель №1</h2>
                <p>Active Directory (AD) — это нервная система большинства корпоративных сетей. Для пентестера это означает, что захват AD равносилен полной победе. Ключевые компоненты, на которые мы нацеливаемся:</p>
                <ul>
                    <li><strong>Контроллер домена (DC):</strong> Сервер, хранящий базу NTDS.dit со всеми хэшами.</li>
                    <li><strong>Kerberos:</strong> Протокол аутентификации. Его слабости можно эксплуатировать.</li>
                    <li><strong>Групповые политики (GPO):</strong> Централизованно управляют настройками компьютеров. Захватив их, можно распространить вредоносное ПО на всю сеть.</li>
                    <li><strong>Пользователи и группы:</strong> Наша цель — найти путь от обычного пользователя до члена группы `Domain Admins`.</li>
                </ul>
            </section>

            <section id="ad-attacks">
                <h2>12. Атаки на Active Directory: Путь к трону</h2>
                <p>Это комплексный процесс, часто называемый "AD Kill Chain".</p>
                <ol>
                    <li><strong>Разведка внутри сети:</strong> После получения первоначального доступа мы должны сориентироваться. Инструмент <strong>BloodHound</strong> собирает информацию об пользователях, группах, сессиях и строит граф атак, показывающий кратчайший путь к правам администратора домена.</li>
                    <li><strong>Kerberoasting:</strong> Запрашиваем Kerberos-билет для сервисной учетной записи (SPN). В этом билете зашифрована часть, подписанная хэшем пароля сервисной учетной записи. Извлекаем этот хэш и взламываем его оффлайн. Сервисные аккаунты часто имеют слабые пароли.</li>
                    <li><strong>Pass the Hash (PtH):</strong> Если мы получили NTLM-хэш пароля пользователя, нам не нужно его взламывать. В Windows-сетях можно аутентифицироваться, используя сам хэш. Инструменты: <strong>Mimikatz, Impacket</strong>.</li>
                    <li><strong>Golden Ticket:</strong> Если мы получили хэш пароля специальной учетной записи `krbtgt`, мы можем создать "золотой билет" Kerberos — универсальный пропуск, который позволяет нам стать кем угодно в домене на 10 лет. Это фактически Game Over.</li>
                </ol>
            </section>
        </article>
    </main>

    <footer>
        <p>&copy; 2024 Cortex Academy. Знания — это свобода.</p>
    </footer>

    <script src="/hack.js"></script>
</body>
</html>