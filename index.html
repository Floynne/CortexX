<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cortex X</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="style.css">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">
</head>
<body>
    <div class="hub-container">
        <header class="hub-header">
            <h1>Cortex X</h1>
            <div id="user-profile" class="user-profile">
                <button id="login-trigger-btn" class="login-trigger-button hidden">–í–æ–π—Ç–∏</button>
                <div id="logged-in-user" class="logged-in-user hidden">
                    <div id="logged-in-avatar" class="avatar-display avatar-clickable" title="–°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä"></div>
                    <span id="logged-in-username"></span>
                    <button id="logout-btn" class="logout-button" title="–í—ã–π—Ç–∏"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
            <h2 id="welcome-message">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:</p>
        </header>

        <div class="app-links">
            <a href="pulse.html" class="app-card music-card"><div class="app-icon"><i class="fas fa-headphones-alt fa-3x"></i></div><div class="app-info"><h2>Pulse Hub</h2><p>–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ —Å –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π.</p></div></a>
            <a href="calendar.html" class="app-card calendar-card"><div class="app-icon"><i class="fas fa-calendar-alt fa-3x"></i></div><div class="app-info"><h2>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</h2><p>–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</p></div></a>
            <a href="notes.html" class="app-card notion-card"><div class="app-icon"><i class="fas fa-pencil-alt fa-3x"></i></div><div class="app-info"><h2>–ó–∞–º–µ—Ç–∫–∏+</h2><p>–ü—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–∞–º–µ—Ç–æ–∫ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π.</p></div></a>
            <a href="weather.html" class="app-card weather-card"><div class="app-icon"><i class="fas fa-cloud-sun-rain fa-3x"></i></div><div class="app-info"><h2>–ü–æ–≥–æ–¥–∞</h2><p>–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –ø–æ –≥–æ—Ä–æ–¥—É –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</p></div></a>
            <a href="#" class="app-card chat-card" id="chat-button"><div class="app-icon"><i class="fa-solid fa-comments fa-3x"></i></div><div class="app-info"><h2>–ß–∞—Ç</h2><p>–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –≤–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏/–±–∞–≥–∏ (Beta)</p></div></a>
            <div class="app-card in-development"><div class="app-icon"><i class="fas fa-film fa-3x"></i></div><div class="app-info"><h2>Coming Soon...</h2><p>...</p><span class="dev-label">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</span></div></div>
        </div>

        <div id="chat-container" style="display: none;">
            <div id="root"></div>
            <button id="back-button" style="display: inline-block; margin-top: 10px;">–ù–∞–∑–∞–¥</button>
        </div>

        <footer class="hub-footer">
            <p>¬© 2024 Cortex X. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="auth-modal-overlay" class="modal-overlay hidden">
        <div id="auth-modal-content" class="modal-content">
            <button id="modal-close-btn" class="modal-close-button">√ó</button>
            <div id="auth-message-modal" class="auth-message"></div>
            <form id="login-form" class="auth-form"><h3>–í—Ö–æ–¥</h3><input type="text" id="login-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required><input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required><button type="submit">–í–æ–π—Ç–∏</button><p class="switch-form">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="show-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></p></form>
            <form id="register-form" class="auth-form hidden"><h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3><input type="text" id="register-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required><input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" required><input type="password" id="register-password-confirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required><button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button><p class="switch-form">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="show-login">–í—Ö–æ–¥</a></p></form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞ -->
    <div id="avatar-select-modal-overlay" class="modal-overlay hidden">
        <div id="avatar-select-modal-content" class="modal-content avatar-modal-content">
            <button id="avatar-modal-close-btn" class="modal-close-button">√ó</button>
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä</h3>
            <div id="avatar-choices" class="avatar-choices-grid"></div>
            <div class="avatar-upload-section">
                <p>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π:</p>
                <button id="upload-avatar-btn" class="upload-avatar-button"><i class="fas fa-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
                <input type="file" id="avatar-file-input" accept="image/png, image/jpeg, image/gif, image/webp" style="display: none;">
                <p id="upload-error-message" class="auth-message error" style="margin-top: 10px;"></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ß–∞—Ç"
        document.getElementById('chat-button').addEventListener('click', function(event) {
            event.preventDefault();

            // –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
            document.querySelector('.hub-container').style.display = 'none';
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∞—Ç–∞
            document.getElementById('chat-container').style.display = 'block';

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ CSS
            function loadCSS(url) {
                return new Promise((resolve, reject) => {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.crossOrigin = '';
                    link.href = url;
                    link.onload = () => resolve();
                    link.onerror = () => reject(new Error(`Failed to load CSS: ${url}`));
                    document.head.appendChild(link);
                });
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ JS
            function loadJS(url) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.type = 'module';
                    script.crossOrigin = '';
                    script.src = url;
                    script.onload = () => resolve();
                    script.onerror = () => reject(new Error(`Failed to load JS: ${url}`));
                    document.body.appendChild(script);
                });
            }

            // –ü–æ–¥–≥—Ä—É–∂–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
            Promise.all([
                loadCSS('/CortexX/assets/index-R-V4mpa.css'),
                loadJS('/CortexX/assets/index-CXtimVLu.js')
            ])
            .then(() => {
                console.log('Resources loaded successfully');
            })
            .catch(error => {
                console.error('Error loading resources:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞—Ç–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.');
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
        document.getElementById('back-button').addEventListener('click', function() {
            document.getElementById('chat-container').style.display = 'none';
            document.querySelector('.hub-container').style.display = 'block';
            // –û—á–∏—â–∞–µ–º –ø–æ–¥–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ —Å—Ç–∏–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            const scripts = document.querySelectorAll('script[src="/CortexX/assets/index-CXtimVLu.js"]');
            const links = document.querySelectorAll('link[href="/CortexX/assets/index-R-_V4mpa.css"]');
            scripts.forEach(s => s.remove());
            links.forEach(l => l.remove());
        });
    </script>
</body>
</html>
